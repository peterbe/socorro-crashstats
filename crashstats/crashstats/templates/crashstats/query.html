{% extends "crashstats_base.html" %}
{% block content %}
<div id="mainbody">
    <script type="text/javascript">
var socSearchFormModel = {{ params_json|safe }};
var prodVersMap = {{ products_json|safe }};
    </script>

    <div class="version-nav query_removemargin">
        <form id="searchform" method="get" action="{{ url('crashstats.query') }}"
              enctype="application/x-www-form-urlencoded">
        <fieldset>

        <ul>
        <li><label class="basic" for="product">Product</label>
            <select id="product" name="product" size="8" multiple="multiple" class="primary">
            {% for product in products %}
                <option value="{{ product }}">{{ product }}</option>
            {% endfor %}
            </select>
        </li>
        <li><label class="basic" for="version">Version: </label>
            <select id="version" name="version" size="8" multiple="multiple" class="primary">
                <option value='ALL:ALL'>All</option>
                <optgroup label="Featured Versions"></optgroup>
                <optgroup label="Older Versions"></optgroup>
            </select>
        </li>
        <li><label class="basic" for="platform">Operating System</label>
            <select id="platform" name="platform" size="8" multiple="multiple" class="primary">
            {% for platform in platforms %}
                <option value="{{ platform.code }}">{{ platform.name }}</option>
            {% endfor %}
            </select>
        </li>
        <li>
            <span class="basic label">
                <a href="#" id="advfiltertoggle" class="not-toggled">Advanced Filters</a>
            </span>

            <div id="advfilter">
                <p class="advanced">
                    <label for="range_value">For the period of </label>
                    <input type="text" id="range_value" name="range_value" value="1" size="2">
                    <select id="range_unit" name="range_unit">
                        <option value="hours">Hours</option>
                        <option value="days">Days</option>
                        <option value="weeks" selected="selected">Weeks</option>
                    </select>
                    <span id="dateHelp">
                        <label for="date"> before </label>
                        <input type="text" name="date" id="date" size="20" title="This field must be formatted as MM/DD/YYYY HH:MM:SS" value="05/10/2012 16:27:37">
                        (UTC)
                    </span>
                </p>

                <p class="advanced">
                    <label for="query_type">Stack signature</label>
                    <input type="hidden" name="query_search" value="signature">
                    <select id="query_type" name="query_type">
                        <option value="exact">is exactly</option>
                        <option value="contains" selected="selected">contains</option>
                        <option value="startswith">starts with</option>
                    </select>
                    <input type="text" id="query" name="query" value="" size="25">
                </p>

                <p class="advanced">
                    <label for="reason">Crash Reason</label>
                    <input type="text" id="reason" name="reason" value="" size="25">
                </p>

                <p class="advanced">
                    <label for="build_id">Build ID</label>
                    <input type="text" id="build_id" name="build_id" value="" size="14">
                </p>

                <p class="advanced">
                    <span class="label">Report Process:</span>
                    <span class="radio-item">
                        <label>
                            <input type="radio" name="process_type" value="any" checked="checked">
                            Any
                        </label>
                    </span>
                    <span class="radio-item">
                        <label>
                            <input type="radio" name="process_type" value="browser">
                            Browser
                        </label>
                    </span>
                    <span class="radio-item">
                        <label>
                            <input type="radio" name="process_type" value="plugin">
                            Plugins
                        </label>
                    </span>
                    <span class="radio-item">
                        <label>
                            <input type="radio" name="process_type" value="content">
                            Content
                        </label>
                    </span>
                </p>

                <p class="advanced">
                    <span class="label">Report Type:</span>
                    <span class="radio-item">
                        <label>
                            <input type="radio" name="hang_type" value="any" checked="checked">
                            Any
                        </label>
                    </span>
                    <span class="radio-item">
                        <label>
                            <input type="radio" name="hang_type" value="crash">
                            Crash
                        </label>
                    </span>
                    <span class="radio-item">
                        <label>
                            <input type="radio" name="hang_type" value="hang">
                            Hang
                        </label>
                    </span>
                </p>

                <p id="plugin-inputs" class="advanced">
                    <label for="plugin_field" >Search By Plugin</label>
                    <select id="plugin_field" name="plugin_field" >
                        <option value="filename">Filename</option>
                        <option value="name">Name</option>
                    </select>
                    <select id="plugin_query_type" name="plugin_query_type" >
                        <option value="exact">is exactly</option>
                        <option value="contains">contains</option>
                        <option value="startswith">starts with</option>
                    </select>
                    <input type="text" id="plugin_query" name="plugin_query" value="" size="25">
                </p>
            </div><!-- /advfilter -->

            <button id="query_submit" type="submit">Filter Crash Reports</button>
            <input type="hidden" name="do_query" value="1">

            <div id="query_waiting" class="hidden">
                <p class="advanced">
                    <img src="{{ static('img/loading.png') }}" alt="Loading animation" />
                    <i>processing query, please wait...</i>
                </p>
            </div>
            </li>

            </ul>
            </fieldset>
        </form>
    </div>

    <div id="formspacer"> </div>

        <div class="page-heading">
            <h2>Query Results</h2>
        </div>

    <div class="panel">
        <div class="body notitle">

    <p>
    Results within 1 weeks of 05/10/2012 16:27:37, and the product is one of Firefox, and the version is one of Firefox:15.0a1 and the crashing process was of any type (including unofficial release channels).</p>

    {{ pagination(query) }}

	    <table id="signatureList" class="tablesorter data-table">
        <thead>
            <tr>
                <th>Rank</th>
                <th>Signature</th>
                <th>#</th>
                <th>Win</th>
                <th>Mac</th>
                <th>Lin</th>
                <th class="bugzilla_numbers">Bugzilla IDs</th>
            </tr>
        </thead>
        <tbody>
            {% for hit in query.hits %}
            <tr>
                <td>n</td>
                <td>
                    <a href="/report/list?product=Firefox&version=Firefox%3A15.0a1&query_search=signature&query_type=contains&reason_type=contains&date=05%2F10%2F2012%2016%3A27%3A37&range_value=1&range_unit=weeks&hang_type=any&process_type=any&do_query=1&signature={{ hit.signature }}">{{ hit.signature }}</a>
                    <div class="signature-icons"></div>
                </td>
                <td>{{ hit.count }}</td>
                <td>{{ hit.is_windows }}</td>
                <td>{{ hit.is_mac }}</td>
                <td>{{ hit.is_linux }}</td>
                <td>
                  <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=752164"
                     title="Find more information in Bugzilla"
                     class="bug-link" >752164</a>
                  <a href='#' title="Click to See all likely bug numbers"
                     class="bug_ids_more">More</a>
                  <div class="bug_ids_expanded_list">
                      <h3>Bugs for <code>{{ hit.signature }}</code></h3>
                      <ul class="bug_ids_expanded full_bug_ids popup">
                          <li>
                              <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=752164"
                                 title="Find more information in Bugzilla"
                                 class="bug-link" >752164</a>
                          </li>
                      </ul>
                 </div>
               </td>
             </tr>
         {% endfor %}
        </tbody>
    </table>

        </div>
    </div>
</div>

{% block site_js %}
    {{ super() }}
    {% compress js %}
<script type="text/javascript" src="{{ static('crashstats/js/socorro/query.js') }}"></script>
    {% endcompress %}
{% endblock %}

{% endblock %}
